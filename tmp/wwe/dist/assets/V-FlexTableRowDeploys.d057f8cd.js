import{_ as e}from"./V-Tag.vue_vue&type=script&setup=true&lang.bf8fa42e.js";import{a,c as s,d as t}from"./index.670b29b2.js";import{u as l}from"./useDropdown.490deeca.js";import{u as o}from"./useNotyf.8c9a8697.js";import{d as r,v as n,j as i,k as d,n as c,u as p,A as u,i as h,B as m,C as y,S as f,F as _,l as k,Q as v,P as b,E as g,U as w,$ as x}from"./vendor.6243191d.js";import{u as j}from"./index.1b405f09.js";const C=c("i",{class:"iconify","data-icon":"feather:more-vertical"},null,-1),N={class:"dropdown-menu",role:"menu",style:{"min-width":"auto"}},A={key:0,class:"dropdown-content"},q=c("div",{class:"icon"},[c("i",{class:"iconify","data-icon":"feather:external-link"})],-1),D=c("div",{class:"meta"},[c("span",null,"打开可视化界面")],-1),S={class:"icon"},$={key:0,class:"fas fa-spinner fa-pulse"},z={key:1,class:"fas fa-play"},E={class:"meta"},O={key:0},B={key:1},F={class:"icon"},I={key:0,class:"fas fa-spinner fa-pulse"},L={key:1,class:"fas fa-stop"},P={class:"meta"},Q={key:0},R={key:1},T=c("div",{class:"icon"},[c("i",{class:"fas fa-trash"})],-1),U=c("div",{class:"meta"},[c("span",null,"删除")],-1),V={key:1,class:"dropdown-content"},G=c("div",{class:"icon"},[c("i",{class:"fas fa-trash"})],-1),H=c("div",{class:"meta"},[c("span",null,"删除")],-1);var J=r({expose:[],props:{row:{type:Object,required:!0}},setup(e){const{row:r}=e;a(),s();const m=t(),y=o(),{dropdownElement:f,isOpen:_,toggle:k}=l();n((()=>m.state.channel.user));const v=h("removeApp");return(e,a)=>(i(),d("div",{"data-key":r.run_status,ref:f,class:[[p(_)&&"is-active"],"dropdown is-spaced is-dots is-right dropdown-trigger is-pushed-mobile"]},[c("div",{class:"is-trigger","aria-haspopup":"true",onClick:a[1]||(a[1]=(...e)=>p(k)&&p(k)(...e))},[C]),c("div",N,[2===r.deploy_status?(i(),d("div",A,[2===r.dep_loc?(i(),d("a",{key:0,href:"#",class:"dropdown-item is-media",onClick:a[2]||(a[2]=e=>{r.open_url&&window.open(r.open_url,"_blank")})},[q,D])):u("",!0),c("a",{href:"#",class:"dropdown-item is-media "+(2===r.run_status?"":"disabled"),onClick:a[3]||(a[3]=e=>{2===r.run_status&&m.dispatch("user/startApp",r.instance_id).then((()=>{m.dispatch("user/getDeploys",{id:r.project_id,page:1,size:10}),y.success("正在启动...")})).catch((e=>{y.error(`启动实例失败，${e.message||e}`)}))})},[c("div",S,[3===r.run_status?(i(),d("i",$)):(i(),d("i",z))]),c("div",E,[3===r.run_status?(i(),d("span",O,"启动中")):(i(),d("span",B,"启动"))])],2),c("a",{href:"#",class:"dropdown-item is-media "+(1===r.run_status?"":"disabled"),onClick:a[4]||(a[4]=e=>{1===r.run_status&&m.dispatch("user/stopApp",r.instance_id).then((()=>{m.dispatch("user/getDeploys",{id:r.project_id,page:1,size:10}),y.success("正在停止...")})).catch((e=>{y.error(`停止实例失败，${e.message||e}`)}))})},[c("div",F,[4===r.run_status?(i(),d("i",I)):(i(),d("i",L))]),c("div",P,[4===r.run_status?(i(),d("span",Q,"停止中")):(i(),d("span",R,"停止"))])],2),void 0===r.is_physical||1===r.is_physical?(i(),d("a",{key:1,href:"#",class:"dropdown-item is-media",onClick:a[5]||(a[5]=e=>p(v)(r))},[T,U])):u("",!0)])):(i(),d("div",V,[c("a",{href:"#",class:"dropdown-item is-media",onClick:a[6]||(a[6]=e=>p(v)(r))},[G,H])]))])],10,["data-key"]))}});const K=x();m("data-v-1e723b50");const M={class:"flex-table-cell","data-th":"Name"},W=c("i",{class:"iconify","data-icon":"feather:copy"},null,-1),X={class:"route-link"},Y={class:"flex-table-cell flex-grow-short","data-th":"Name"},Z={class:"flex-table-cell flex-grow-short","data-th":"Name"},ee={class:"flex-table-cell flex-grow-short","data-th":"Name"},ae={key:0,class:"flex-table-cell flex-grow-short","data-th":"Name"},se={key:1,class:"flex-table-cell","data-th":"Name"},te={key:2,class:"flex-table-cell","data-th":"Name"},le={key:1},oe={key:3,class:"flex-table-cell","data-th":"Name"},re={class:"flex-table-cell time","data-th":"Name"},ne={class:"flex-table-cell cell-end"};y();var ie=r({expose:[],props:{rows:{type:Array,required:!0},project:{type:String,required:!1},edge:{type:String,required:!1}},setup(a){const{toClipboard:s}=j(),t=o(),l={1:"部署中",2:"成功",3:"失败"},r={1:"运行中",2:"已停止",3:"启动中",4:"停止中"},n=e=>e.substr(0,8);return(o,p)=>{const h=k("RouterLink"),m=e,y=J,x=v("tooltip");return i(!0),d(_,null,f(a.rows,(e=>(i(),d("div",{key:e.id,class:"flex-table-item"},[c("div",M,[b(c("span",{class:"icon-copy",onClick:a=>{return l=e.instance_id,s(l),void t.success("复制成功");var l}},[W],8,["onClick"]),[[x,e.instance_id,void 0,{top:!0,right:!0,rounded:!0}]]),c("span",X,[a.project?(i(),d(h,{key:0,to:{name:"user-projects-projectid-deploys-instance",params:{projectid:e.project_id,instance:e.instance_id}}},{default:K((()=>[g(w(e.name),1)])),_:2},1032,["to"])):(i(),d(h,{key:1,to:{name:"admin-instances-instance",params:{instance:e.instance_id}}},{default:K((()=>[g(w(e.name),1)])),_:2},1032,["to"]))])]),c("div",Y,[2===e.deploy_status?(i(),d(m,{key:0,color:"primary",label:l[e.deploy_status],rounded:""},null,8,["label"])):u("",!0),3===e.deploy_status?(i(),d(m,{key:1,color:"danger",label:l[e.deploy_status],rounded:""},null,8,["label"])):u("",!0),1===e.deploy_status?(i(),d(m,{key:2,icon:"fas fa-spinner fa-pulse",color:"orange",label:l[e.deploy_status],rounded:""},null,8,["label"])):u("",!0)]),c("div",Z,[e.health&&2===e.run_status&&1===e.health?(i(),d(m,{key:0,color:"danger",label:r[e.run_status],rounded:""},null,8,["label"])):u("",!0),e.health&&1===e.run_status&&1===e.health?(i(),d(m,{key:1,color:"primary",label:r[e.run_status],rounded:""},null,8,["label"])):u("",!0),2===e.health?(i(),d(m,{key:2,color:"danger",label:r[e.health],rounded:""},null,8,["label"])):u("",!0),e.health&&3===e.run_status&&1===e.health||e.health&&4===e.run_status&&1===e.health?(i(),d(m,{key:3,icon:"fas fa-spinner fa-pulse",color:"info",label:r[e.run_status],rounded:""},null,8,["label"])):u("",!0)]),c("div",ee,w(e.thing_model),1),a.edge?u("",!0):(i(),d("div",ae,[1===e.health?(i(),d(m,{key:0,color:"primary",label:"正常",rounded:""})):u("",!0),2===e.health?(i(),d(m,{key:1,color:"danger",label:"异常",rounded:""})):u("",!0)])),a.project?(i(),d("div",se,w(e.artifact_name),1)):u("",!0),a.project||a.edge?u("",!0):(i(),d("div",te,[e.edge_id&&1===e.health?(i(),d(h,{key:0,to:{name:"admin-edges-edgeid",params:{edgeid:e.edge_id}}},{default:K((()=>[g(w(n(e.hostname)),1)])),_:2},1032,["to"])):(i(),d("span",le,w(n(e.hostname)),1))])),a.project?u("",!0):(i(),d("div",oe,w(e.operator_name),1)),c("div",re,w(e.create_time),1),c("div",ne,[e.health&&1===e.health?(i(),d(y,{key:e.instance_id+e.deploy_status+e.run_status,row:e},null,8,["row"])):u("",!0)])])))),128)}}});ie.__scopeId="data-v-1e723b50";export{ie as _};
