var e=Object.defineProperty,l=Object.prototype.hasOwnProperty,a=Object.getOwnPropertySymbols,s=Object.prototype.propertyIsEnumerable,t=(l,a,s)=>a in l?e(l,a,{enumerable:!0,configurable:!0,writable:!0,value:s}):l[a]=s,o=(e,o)=>{for(var d in o||(o={}))l.call(o,d)&&t(e,d,o[d]);if(a)for(var d of a(o))s.call(o,d)&&t(e,d,o[d]);return e};import{_ as d,a as i}from"./V-Field.vue_vue&type=script&setup=true&lang.50df6a27.js";import{_ as r}from"./V-Button.vue_vue&type=script&setup=true&lang.7d7c3fd2.js";import{_ as u}from"./V-Loader.vue_vue&type=script&setup=true&lang.152a1df5.js";import{_ as n}from"./V-Buttons.vue_vue&type=script&setup=true&lang.88c78073.js";import{_ as c}from"./V-Message.vue_vue&type=script&setup=true&lang.177426e4.js";import{d as p,r as v,b as f,v as m,W as b,j as _,k as y,n as h,m as j,u as g,A as V,l as z,P,Z as O,X as w,F as x,S as U,U as k,E as A}from"./vendor.6243191d.js";import{a as q,c as M,d as S}from"./index.670b29b2.js";import{u as B}from"./useNotyf.8c9a8697.js";const D={class:"form-card",style:{width:"auto",height:"auto"}},E={class:"form-inner"},F={class:"field is-horizontal"},C=h("div",{class:"field-label is-normal"},[h("label",{class:"label"},"项目类别")],-1),I={class:"field-body"},L={class:"select"},N=h("option",{value:""},"请选择",-1),T=h("option",{value:"0"},"基础APP",-1),W=h("option",{value:"1"},"高级APP",-1),X=h("option",{value:"2"},"节点",-1),Z={class:"field is-horizontal"},$=h("div",{class:"field-label is-normal"},[h("label",{class:"label required"},"名称")],-1),G={class:"field-body"},H={class:"field is-horizontal"},J=h("div",{class:"field-label is-normal"},[h("label",{class:"label"},"项目描述")],-1),K={class:"field-body"},Q={key:0,class:"field is-horizontal"},R=h("div",{class:"field-label is-normal"},[h("label",{class:"label required"},"端模型")],-1),Y={class:"field-body"},ee={class:"select"},le=h("option",{value:""},"请选择",-1),ae={key:1,class:"field is-horizontal"},se=h("div",{class:"field-label is-normal"},[h("label",{class:"label"},"数据集")],-1),te={class:"field-body"},oe={class:"field is-horizontal"},de=h("div",{class:"field-label is-normal"},[h("label",{class:"label"})],-1),ie={class:"field-body"},re={class:"field is-horizontal"},ue=h("div",{class:"field-label is-normal"},null,-1),ne={class:"field-body"};var ce=p({expose:[],props:{project:{type:Object,required:!1}},setup(e){const{project:l}=e;q();const a=M(),s=S(),t=B(),p=v(!1),ce=f({repo_name:"",desc:"",model_id:"",level:"1",data_set:[]});console.log("formData",ce);const pe={1:"数据集1",2:"数据集2",3:"数据集3"};console.log("project",l,ce);const ve=v("");l&&(console.log("project.level",l),ce.repo_name=l.repo_name,ce.desc=l.desc,ce.level=l.level+"",ce.data_set=l.data_set,ce.model_id=l.model_id,console.log("formData",ce));const fe=m((()=>s.getters["channel/getThingModels"]));return b((()=>{s.dispatch("channel/getAgents",{page:1,size:10})})),(e,v)=>{const f=i,m=d,b=z("Multiselect"),q=r,M=u,S=n,B=c;return _(),y("div",D,[h("div",E,[h("div",F,[C,h("div",I,[h(m,null,{default:j((()=>[h(f,null,{default:j((()=>[h("div",L,[P(h("select",{"onUpdate:modelValue":v[1]||(v[1]=e=>g(ce).level=e),disabled:!!l},[N,T,W,X],8,["disabled"]),[[O,g(ce).level]])])])),_:1})])),_:1})])]),h("div",Z,[$,h("div",G,[h(m,null,{default:j((()=>[h(f,null,{default:j((()=>[P(h("input",{"onUpdate:modelValue":v[2]||(v[2]=e=>g(ce).repo_name=e),class:"input",type:"text",disabled:!!l,placeholder:"项目名称只能输入小写字母、减号或下划线"},null,8,["disabled"]),[[w,g(ce).repo_name]])])),_:1})])),_:1})])]),h("div",H,[J,h("div",K,[h(m,null,{default:j((()=>[h(f,null,{default:j((()=>[P(h("textarea",{"onUpdate:modelValue":v[3]||(v[3]=e=>g(ce).desc=e),class:"textarea",rows:"6",placeholder:"请输入项目描述"},"\n              ",512),[[w,g(ce).desc]])])),_:1})])),_:1})])]),"2"!==g(ce).level?(_(),y("div",Q,[R,h("div",Y,[h(m,null,{default:j((()=>[h(f,null,{default:j((()=>[h("div",ee,[P(h("select",{"onUpdate:modelValue":v[4]||(v[4]=e=>g(ce).model_id=e),disabled:!!l},[le,(_(!0),y(x,null,U(g(fe),(e=>(_(),y("option",{value:e.id},k(e.name),9,["value"])))),256))],8,["disabled"]),[[O,g(ce).model_id]])])])),_:1})])),_:1})])])):V("",!0),"2"!==g(ce).level?(_(),y("div",ae,[se,h("div",te,[h(m,null,{default:j((()=>[h(f,null,{default:j((()=>[h(b,{modelValue:g(ce).data_set,"onUpdate:modelValue":v[5]||(v[5]=e=>g(ce).data_set=e),mode:"multiple",options:pe,placeholder:"Select options"},null,8,["modelValue"])])),_:1})])),_:1})])])):V("",!0),h("div",oe,[de,h("div",ie,[h(m,null,{default:j((()=>[h(f,null,{default:j((()=>[h(S,null,{default:j((()=>[h(M,{size:"small",active:p.value},{default:j((()=>[h(q,{disabled:p.value,onClick:v[6]||(v[6]=e=>(()=>{if(p.value)return!1;""!==ce.level?/^[A-z0-9][\w\-]+$/.test(ce.repo_name)?"2"==ce.level||""!==ce.model_id?(p.value=!0,l?(ce.id=l.project_id,s.dispatch("user/editProject",o(o({},ce),{level:void 0})).then((()=>{t.success("修改成功！"),p.value=!1,a.push({name:"user-projects"})}))):s.dispatch("user/createProject",ce).then((()=>{t.success("创建成功！"),a.push({name:"user-projects"})})).catch((e=>{ve.value=e.message||e,p.value=!1}))):t.error("请选择端模型"):t.error("名称只能包含字母数字、减号和下划线"):t.error("请选择项目类别")})()),color:"primary",raised:""},{default:j((()=>[A(k("确定"),1)])),_:1},8,["disabled"])])),_:1},8,["active"])])),_:1})])),_:1})])),_:1})])]),h("div",re,[ue,h("div",ne,[h(m,null,{default:j((()=>[h(f,null,{default:j((()=>[ve.value?(_(),y(B,{key:0,color:"danger"},{default:j((()=>[A(k(ve.value),1)])),_:1})):V("",!0)])),_:1})])),_:1})])])])])}}});export{ce as _};
