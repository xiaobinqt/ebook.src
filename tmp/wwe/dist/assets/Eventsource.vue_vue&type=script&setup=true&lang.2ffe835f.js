import{d as e,W as t,f as o}from"./vendor.6243191d.js";var s=e({expose:[],props:{onmessage:{type:Function,default:!1},topic:{type:String,default:!1}},setup(e){const{onmessage:s,topic:n}=e;let a;return t((()=>{a=new EventSource(`/api/events?token=${localStorage.getItem("token")}`);const e=n.split("|");a.onmessage=function(t){if(t.data)try{const o=JSON.parse(t.data);-1!==e.indexOf(o.topic)&&s(o)}catch(o){}}})),o((()=>{a.close()})),(e,t)=>null}});export{s as _};
