import{a as e}from"./activeSidebarState.4b53b430.js";import{d as l,a}from"./index.670b29b2.js";import{d as s,v as o,j as n,k as t,n as i,u as r,m as u,A as d,l as c,E as p,P as v,Q as m,r as g,O as f,a as j,U as b,F as _,S as y,a6 as h,p as k}from"./vendor.6243191d.js";import{s as V,a as w,b as x,_ as C}from"./ciSidebarLayoutState.24681d38.js";import{_ as L}from"./Logs.vue_vue&type=style&index=0&lang.4d7166de.js";import{a as S,c as U,l as R,i as F,n as P}from"./activePanelState.21033cba.js";import{_ as T}from"./V-Radio.vue_vue&type=script&setup=true&lang.3abcd434.js";import{_ as A,a as E}from"./V-Field.vue_vue&type=script&setup=true&lang.50df6a27.js";import{_ as M}from"./V-Message.vue_vue&type=script&setup=true&lang.177426e4.js";import"./Terminal.vue_vue&type=style&index=0&lang.62698032.js";import"./base64.8e96393c.js";import"./filters.e49d41fb.js";import"./moment.08a7f518.js";const N={class:"subpanel-header"},O=i("h3",{class:"no-mb"},"项目",-1),Q=i("i",{class:"iconify","data-icon":"feather:users"},null,-1),$={key:0,class:"inner","data-simplebar":""},q=p("代码管理"),z=p("持续集成"),B={key:0},D=p("持续部署"),G=p("制品管理"),H={key:1},I=p("发版管理");var J=s({expose:[],setup(a){const s=l(),p=o((()=>s.state.user.project));return console.log("project",p),(l,a)=>{const s=c("RouterLink");return n(),t("div",{id:"layouts-sidebar",class:[["projects"===r(e)&&"is-active"],"sidebar-panel is-generic"]},[i("div",N,[O,i("div",{class:"panel-close",onClick:a[1]||(a[1]=l=>e.value="none")},[Q])]),r(p)?(n(),t("div",$,[i("ul",null,[i("li",null,[i(s,{to:{name:"user-projects-projectid-files",params:{projectid:r(p).project_id}}},{default:u((()=>[q])),_:1},8,["to"])]),i("li",null,[i(s,{to:{name:"user-projects-projectid-builds",params:{projectid:r(p).project_id}}},{default:u((()=>[z])),_:1},8,["to"])]),2!==r(p).level?(n(),t("li",B,[i(s,{to:{name:"user-projects-projectid-deploys",params:{projectid:r(p).project_id}}},{default:u((()=>[D])),_:1},8,["to"])])):d("",!0),i("li",null,[i(s,{to:{name:"user-projects-projectid-artifacts",params:{projectid:r(p).project_id}}},{default:u((()=>[G])),_:1},8,["to"])]),2!==r(p).level?(n(),t("li",H,[i(s,{to:{name:"user-projects-projectid-releases",params:{projectid:r(p).project_id}}},{default:u((()=>[I])),_:1},8,["to"])])):d("",!0)])])):d("",!0)],2)}}});const K={class:"subpanel-header"},W=i("h3",{class:"no-mb"},"设置",-1),X=i("i",{class:"iconify","data-icon":"feather:users"},null,-1),Y={class:"inner","data-simplebar":""},Z=p("基本信息"),ee=p("修改密码"),le=p("开发机");var ae=s({expose:[],setup:l=>(l,a)=>{const s=c("RouterLink");return n(),t("div",{id:"layouts-sidebar",class:[["settings"===r(e)&&"is-active"],"sidebar-panel is-generic"]},[i("div",K,[W,i("div",{class:"panel-close",onClick:a[1]||(a[1]=l=>e.value="none")},[X])]),i("div",Y,[i("ul",null,[i("li",null,[i(s,{to:{name:"user-settings-profile"}},{default:u((()=>[Z])),_:1})]),i("li",null,[i(s,{to:{name:"user-settings-password"}},{default:u((()=>[ee])),_:1})]),i("li",null,[i(s,{to:{name:"user-settings-systeminfo"}},{default:u((()=>[le])),_:1})])])])],2)}});const se={class:"right-panel terminal-panel"},oe={class:"right-panel-head"},ne=p("日志 "),te=i("i",{class:"iconify","data-icon":"feather:external-link"},null,-1),ie=i("i",{class:"iconify","data-icon":"feather:x"},null,-1),re={class:"right-panel-body"};var ue=s({expose:[],setup(e){a();return(e,l)=>{const a=L,s=m("tooltip");return n(),t("div",{id:"languages-panel",class:[["log"===r(S)&&"is-active"],"right-panel-wrapper"]},[i("div",{class:"panel-overlay",onClick:l[1]||(l[1]=e=>S.value="none")}),i("div",se,[i("div",oe,[i("h3",null,[ne,v(i("a",{onClick:l[2]||(l[2]=e=>(window.open(`/log/${U.value}`,"_blank"),activeTerminal.value="",void(S.value="none"))),target:"_blank"},[te],512),[[s,"在新窗口中打开",void 0,{bottom:!0,right:!0,rounded:!0}]])]),i("a",{class:"close-panel",onClick:l[3]||(l[3]=e=>(U.value="",void(S.value="none")))},[ie])]),i("div",re,[i(a,{key:r(U),id:r(U)},null,8,["id"])])])],2)}}});const de={class:"right-panel terminal-panel"},ce={class:"right-panel-head"},pe=i("i",{class:"iconify","data-icon":"feather:x"},null,-1),ve={class:"right-panel-body"},me={class:"node-log"},ge={key:0,class:"nodelog-body"},fe={key:1,class:"nodelog-body"},je=p("暂无日志！");var be=s({expose:[],setup(e){const s=l();a();const d=o((()=>s.state.user.logs)),c=g([]);f((()=>{})),j(R,(e=>{c.value="all"===e?d.value:d.value.filter((l=>l.level===e)),console.log("logs.value",c.value)})),j(P,(e=>{e&&s.dispatch("user/getNodeLog",{id:F.value,level:"all",node_id:e}).then((e=>{console.log("allLogs.value",d.value),c.value=d.value}))}));const v={warn:"warning",error:"danger",info:"info"};return(e,l)=>{const a=T,s=E,o=A,d=M;return n(),t("div",{id:"languages-panel",class:[["nodelog"===r(S)&&"is-active"],"right-panel-wrapper"]},[i("div",{class:"panel-overlay",onClick:l[1]||(l[1]=e=>S.value="none")}),i("div",de,[i("div",ce,[i("h3",null,"日志（"+b(r(P))+"）",1),i("a",{class:"close-panel",onClick:l[2]||(l[2]=e=>(P.value="",F.value="",S.value="none",void(R.value="all")))},[pe])]),i("div",ve,[i("div",me,[i(o,null,{default:u((()=>[i(s,null,{default:u((()=>[i(a,{modelValue:r(R),"onUpdate:modelValue":l[3]||(l[3]=e=>h(R)?R.value=e:null),value:"all",label:"all",name:"level",solid:""},null,8,["modelValue"]),i(a,{modelValue:r(R),"onUpdate:modelValue":l[4]||(l[4]=e=>h(R)?R.value=e:null),value:"error",label:"error",name:"level",color:"danger",solid:""},null,8,["modelValue"]),i(a,{modelValue:r(R),"onUpdate:modelValue":l[5]||(l[5]=e=>h(R)?R.value=e:null),value:"warn",label:"warn",name:"level",color:"warning",solid:""},null,8,["modelValue"]),i(a,{modelValue:r(R),"onUpdate:modelValue":l[6]||(l[6]=e=>h(R)?R.value=e:null),value:"info",label:"info",name:"level",color:"info",solid:""},null,8,["modelValue"])])),_:1})])),_:1}),c.value.length?(n(),t("div",ge,[(n(!0),t(_,null,y(c.value,(e=>{return n(),t(d,{color:(l=e.level,v[l]||"")},{default:u((()=>[p(b(e.time)+" "+b(e.msg),1)])),_:2},1032,["color"]);var l})),256))])):(n(),t("div",fe,[i(d,null,{default:u((()=>[je])),_:1})]))])])])],2)}}});const _e={class:"page-content-wrapper"},ye={class:"page-content is-relative"};var he=s({expose:[],setup(l){const s=a();return f((()=>{e.value="none"})),j((()=>s.path),(()=>{e.value="none"})),V("sidebar-user"),(l,a)=>{const s=J,o=ae,d=C,p=ue,v=be,m=c("RouterView");return n(),t(k(r(x)),{class:r(w)},{default:u((()=>[i(s),i(o),i(d),i(p),i(v),i("div",{class:["view-wrapper",["none"!==r(e)&&"is-pushed-full"]]},[i("div",_e,[i("div",ye,[i(m)])])],2)])),_:1},8,["class"])}}});export default he;
