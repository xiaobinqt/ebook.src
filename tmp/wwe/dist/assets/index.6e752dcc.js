import{_ as e}from"./V-Breadcrumb.vue_vue&type=script&setup=true&lang.95222eda.js";import{_ as a}from"./ViewListTree.855c5b31.js";import{u as s,e as t,a as n,c as o,d as i}from"./index.670b29b2.js";import{B as l}from"./base64.8e96393c.js";import{t as c,a as r}from"./activeSidebarState.4b53b430.js";import{u}from"./useNotyf.8c9a8697.js";import{u as d}from"./index.1b405f09.js";import{d as p,v as m,f,r as v,W as g,O as b,j as h,k,n as y,u as j,A as w,P as x,U as _,B as C,C as S,Q as B}from"./vendor.6243191d.js";C("data-v-2c02e133");const I={class:"page-title has-text-centered"},q={class:"menu-toggle has-chevron"},z=y("span",{class:"rotate"},[y("i",{class:"icon-line-top"}),y("i",{class:"icon-line-center"}),y("i",{class:"icon-line-bottom"})],-1),L=y("div",{class:"title-wrap"},[y("h1",{class:"title is-4"},"节点预览")],-1),N={class:"page-content-inner"},O={class:"breadcrumb-box"},V=y("i",{class:"iconify","data-icon":"feather:corner-down-left"},null,-1),X={id:"box"},A={id:"left"},E=y("div",{id:"resize"},null,-1),J={key:0,class:"copy"},P=y("i",{class:"iconify","data-icon":"feather:copy"},null,-1),Q={class:"pre"},T={key:0,class:"loading"},U=y("span",{class:"icon"},[y("i",{class:"fas fa-spinner fa-pulse"})],-1);S();var W=p({expose:[],setup(p){s({title:"节点预览"});const C=n(),S=o(),W=i(),D=u(),{toClipboard:F}=d(),G=m((()=>W.state.channel.preview));f((()=>{localStorage.setItem("files",""),W.commit("channel/preview","")}));const H=()=>{F(G.value),D.success("复制成功")},K=v({});g((async()=>{const e=C.query.files.split("/");await t({packagesid:C.params.packagesid,name:e[e.length-1]}).then((e=>{K.value=e;for(let a in e.file_content)"package/package.json"===a&&W.commit("channel/preview",l.decode(e.file_content[a]));localStorage.setItem("files",JSON.stringify(e.tree))}))}));const M=v([{icon:"feather:home",hideLabel:!0,to:{name:"user-projects"}},{label:"节点商店",to:{name:"user-packages"}},{label:C.params.packagesid,to:{name:"user-packages-packagesid",params:{packagesid:C.params.packagesid},query:{files:C.query.files}}}]),R=v(860);return b((()=>{(()=>{let e=document.getElementById("resize");e.onmousedown=function(a){let s=a.clientX;return e.left=e.offsetLeft,document.onmousemove=function(e){let a=e.clientX,t=a-s;s=a,R.value-=t},document.onmouseup=function(){document.onmousemove=null,document.onmouseup=null},!1}})()})),(s,t)=>{const n=e,o=a,i=B("tooltip");return h(),k("div",null,[y("div",I,[y("div",{class:"vuero-hamburger nav-trigger push-resize",onClick:t[1]||(t[1]=e=>j(c)("none"))},[y("span",q,[y("span",{class:[["none"===j(r)&&""],"icon-box-toggle"]},[z],2)])]),L]),y("div",N,[y("div",O,[M.value?(h(),k(n,{key:0,items:M.value,separator:"bullet","with-icons":""},null,8,["items"])):w("",!0),y("div",{onClick:t[2]||(t[2]=()=>j(S).back())},[V])])]),y("div",X,[y("div",A,[y(o,{"tree-data":K.value.tree,"tree-Content":K.value.file_content},null,8,["tree-data","tree-Content"])]),E,y("div",{id:"right",style:{width:R.value+"px"}},["文件类型不支持预览，当前可预览文件类型包括 .js  .html  .json  .cc  .c  .py  .md  .gyp"!==j(G)?x((h(),k("div",J,[y("span",{onClick:H},[P])],512)),[[i,"复制",void 0,{top:!0,right:!0,rounded:!0}]]):w("",!0),y("pre",Q,_(j(G)),1)],4),""===j(G)?(h(),k("div",T,[U])):w("",!0)])])}}});W.__scopeId="data-v-2c02e133";export default W;
