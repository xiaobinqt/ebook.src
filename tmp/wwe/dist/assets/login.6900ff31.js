var a=Object.defineProperty,e=Object.prototype.hasOwnProperty,s=Object.getOwnPropertySymbols,l=Object.prototype.propertyIsEnumerable,t=(e,s,l)=>s in e?a(e,s,{enumerable:!0,configurable:!0,writable:!0,value:l}):e[s]=l,o=(a,o)=>{for(var n in o||(o={}))e.call(o,n)&&t(a,n,o[n]);if(s)for(var n of s(o))l.call(o,n)&&t(a,n,o[n]);return a};import{d as n,r as c,W as r,v as i,j as d,k as u,n as p,a2 as g,P as h,u as m,$ as A,B as v,E as b,C as I,l as f,X as C,a7 as w}from"./vendor.6243191d.js";import{_ as y,a as B}from"./left-img.798bb77d.js";import{u as E,c as U,a as x,d as q,J as _}from"./index.670b29b2.js";import{u as N}from"./useNotyf.8c9a8697.js";const k=A();v("data-v-608549d2");const L={class:"login"},j=p("div",{class:"left"},[p("img",{class:"logo",src:y,alt:""}),p("img",{class:"login-img",src:B,alt:""})],-1),Q={class:"right"},D={class:"right-content"},O=p("div",{class:"title"},[b("欢迎登录柔性平台CLOU"),p("span",{style:{color:"#35b2ac"}},"D")],-1),S=p("div",{class:"describe"},[b("柔性开发仿真一体化平台，集设计、研发、仿真、测试、认证、发布 "),p("div",{class:"two"},"于一体的一站式云平台")],-1),J={class:"control has-validation"},P=p("div",{class:"auth-label"},"用户名",-1),K=p("div",{class:"show"},null,-1),R={class:"control has-validation"},W=p("div",{class:"auth-label"},"密码",-1),V=p("div",{class:"show"},null,-1),Y={class:"control has-validation"},M=p("div",{class:"auth-label label-code"},"验证码",-1),T=p("div",{class:"show"},null,-1),F={class:"force-login"},G={class:"checkbox is-solid"},z=p("span",null,null,-1),Z=b("强制登录 "),X={class:"button-wrap has-help"},H=b(" 登录 "),$=p("img",{class:"go",src:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACIAAAAnCAYAAABqippxAAAAAXNSR0IArs4c6QAAAqdJREFUWEftmE9oE0EUxr+3QSy2xUM9CXqoiBWkWJuNtqA2oIi2abQme7AIHqzgwYsWEU+99VBF8CBIBVE0h2RTmt1cqqKCoLhp/Nu7aHsTDyqCwWaepEmKpJN0l2ZjDslt9+28+e2XN9/MPoLk50vqR1ggIou5dO8zyRKrph4Aw3BpUlnaeSmIz4gNMMisIcgnuyARJl4gJqU6cJQF+DCAPYV89kCEEJ3p49rH6kDks6hm7BqYLjkCIRK9VkB7VU0QrxG7SaALDZCiqg1FSuvLniJm/AQzTxUHk8IHrIHwC6n5Tcd6maiDiARY/EgFw8vjKhW3LZBuU+/wMJ0uJsoiezs9qH2RbgdmtIdZebkcI5xLBUKTq60wWyCrJSmNq4Y+DuBK4f48LSpd1tDQtzUr4hSk79ndpl8/W+cAbMuNJcaEFQxdrjlIbkKvGesjpqc5DgC/mcTB2YBmlYNx5a8pTqYm4g9APLx0TXjS3NJ29LnfvyiDcRWkOxrdqDQpHwBszbPwiDUYvmMLZF9yaidzdovTupA9L5gzYGUYhJGlOGOBsspuWeGuUEQ14pMAn60GiCwHATesN3OjGBsT/8ZXgpj6LTDOuwUCwh/FQ+2vj51cqAxSL4q4WiNAWXNzd9WYkU0Kr3sP0OaCsZ2xgqF7tlZNNWtDNfSHAE7lFwwetbS29dfcR9Tp+CEo/LjwYhlm9MwGQ29r6qydM/eb12c25IysPe+qPJ4KhK/WfK9RDX0CwGjRxERG7Epr2vc1gzg5j+xNxP2COLfZFcRA2QKt6CMyap+DE5ovGdsvsrTdlRNa6Sdn47umoUhpwdatIvCIrlS/9q6a24E3oV8nwsVCTnttCTBmQPgKJmk/xTEgMec6EwB2OANxPJPjAXJF6qeH9h+6in8B0P+9VoLp75UAAAAASUVORK5CYII=",alt:""},null,-1),aa={class:"register"},ea=p("div",{class:"line-left"},null,-1),sa={class:"text"},la=b(" 没有账号，请点此"),ta=b(" 注册 "),oa=p("div",{class:"line-right"},null,-1);I();var na=n({expose:[],setup(a){c("login");const e=c(!1),s=U(),l=x(),t=N(),n=q(),A={user_name:"",password:"",captcha_code:"",login_force:!1},v=async()=>{e.value=!0;const a=(a=>{const e=new _;return e.setPublicKey("-----BEGIN PUBLIC KEY-----\nMIIBIjANBgkqhkiG9w0BAQEFAAOCAQ8AMIIBCgKCAQEAl6QEJ85lrOdVIf0uCziW\n5+gZXIA7wGgVWByTuFhj8Tuui+FhguF00NCXLGt8zi/hULWl06MsJlB+RlZQ3Kcb\nOa/+dmBXm/XVNhDxC3l4PJQx5WDhDDIEXaRxAVBZVfTGQ/hQYfdrvULzb7g2040L\nvPbQo+NJ992Csm241vr+Qe+cn8ytcc83EWWWJZEXhKEB5eNeBsCbRVHV6+uioc85\nd5FS2BsdNx23I8uFHU+VguKEXRZeKZQzUMjoLaUysWyAOMMxMgHDaO5fYZbSkLDz\nwCliRLiFzQbBoLhNhmYfQYp7I1AO0tYrrAV+vlIghM39Ys6UZ9A3P0jLaDEMOo6g\nfwIDAQAB\n-----END PUBLIC KEY-----"),e.encrypt(a)})(JSON.stringify(o(o({},A),{captcha_id:b.value.captcha_id,login_force:A.login_force?"1":"0"})));n.dispatch("channel/login",a).then((a=>{a.token&&n.dispatch("channel/getProfile").then((a=>{t.success("欢迎登录！");let o=setInterval((()=>{e.value=!1,clearInterval(o)}),5e3);l.query.goback?s.push(l.query.goback):2===a.login_attr?s.push({name:"admin-dashboard"}):s.push({name:"user-projects"})}))}),(a=>{t.error(a.message),n.dispatch("channel/getCode");let s=setInterval((()=>{e.value=!1,clearInterval(s)}),5e3)}))};E({title:"用户登录"}),r((()=>{n.dispatch("channel/getProfile").then((a=>{console.log("user.ex_logined",a.ex_logined),a.ex_logined?l.query.goback?s.push(l.query.goback):(2===a.login_attr&&(localStorage.setItem("login_attr",2),s.push({name:"admin-dashboard"})),1===a.login_attr&&(localStorage.setItem("login_attr",1),s.push({name:"user-projects"}))):n.dispatch("channel/refreshToken").then((()=>{n.dispatch("channel/getProfile").then((a=>{l.query.goback?s.push(l.query.goback):(2===a.login_attr&&(localStorage.setItem("login_attr",2),s.push({name:"admin-dashboard"})),1===a.login_attr&&(localStorage.setItem("login_attr",1),s.push({name:"user-projects"})))}))}))})),n.dispatch("channel/getCode")})),i((()=>n.state.channel.logined));const b=i((()=>n.state.channel.code));return(a,s)=>{const l=f("RouterLink");return d(),u("div",L,[j,p("div",Q,[p("div",D,[O,S,p("form",{class:"login-wrapper",onSubmit:g(v,["prevent"])},[p("div",J,[h(p("input",{type:"text","onUpdate:modelValue":s[1]||(s[1]=a=>A.user_name=a),class:"input",placeholder:"",autocomplete:"user_name"},null,512),[[C,A.user_name]]),P,K]),p("div",R,[h(p("input",{type:"password","onUpdate:modelValue":s[2]||(s[2]=a=>A.password=a),class:"input",autocomplete:"current-password"},null,512),[[C,A.password]]),W,V]),p("div",Y,[h(p("input",{type:"text","onUpdate:modelValue":s[3]||(s[3]=a=>A.captcha_code=a),class:"input code",autocomplete:"user_name"},null,512),[[C,A.captcha_code]]),p("span",{class:"code-img",onClick:s[4]||(s[4]=a=>(async()=>{n.dispatch("channel/getCode")})())},[p("img",{src:m(b).captcha_img,alt:""},null,8,["src"])]),M,T]),p("div",F,[p("label",G,[h(p("input",{type:"checkbox","onUpdate:modelValue":s[5]||(s[5]=a=>A.login_force=a)},null,512),[[w,A.login_force]]),z,Z])]),p("div",X,[p("button",{disabled:!!e.value,class:"btn"},[H,$],8,["disabled"])]),p("div",aa,[ea,p("div",sa,[la,p("span",null,[p(l,{to:{name:"auth-register"}},{default:k((()=>[ta])),_:1})])]),oa])],40,["onSubmit"])])])])}}});na.__scopeId="data-v-608549d2";export default na;
