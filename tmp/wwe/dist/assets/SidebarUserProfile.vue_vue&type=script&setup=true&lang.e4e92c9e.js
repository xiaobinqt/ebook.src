import{_ as s}from"./V-Avatar.vue_vue&type=script&setup=true&lang.b24e093a.js";import{_ as e}from"./V-PlaceholderSection.vue_vue&type=script&setup=true&lang.67c36c04.js";import{_ as a}from"./V-Button.vue_vue&type=script&setup=true&lang.7d7c3fd2.js";import{_ as n}from"./V-Modal.vue_vue&type=script&setup=true&lang.13c249d1.js";import{a as l,c as t,d as i}from"./index.670b29b2.js";import{u as o}from"./useDropdown.490deeca.js";import{d as r,v as d,r as u,W as c,l as p,j as m,k as v,n as g,u as _,A as f,U as h,m as w,E as b}from"./vendor.6243191d.js";const k={id:"user-menu"},y=g("span",{class:"status-indicator"},null,-1),j={key:1,class:"dropdown-menu",role:"menu"},x={class:"dropdown-content"},C={class:"dropdown-head"},V={class:"v-avatar is-large"},A={class:"meta"},E=g("div",{class:"icon"},[g("i",{class:"lnil lnil-user-alt"})],-1),P=g("div",{class:"meta"},[g("span",null,"基础信息"),g("span",null,"查看基础信息")],-1),z=g("hr",{class:"dropdown-divider"},null,-1),B=g("div",{class:"icon"},[g("i",{class:"lnil lnil-keyword-research"})],-1),D=g("div",{class:"meta"},[g("span",null,"修改密码"),g("span",null,"点击修改密码")],-1),L=g("hr",{class:"dropdown-divider"},null,-1),M={class:"dropdown-item is-button"},O=g("span",{class:"icon is-small"},[g("i",{class:"iconify","data-icon":"feather:log-out"})],-1),R=g("span",null,"退出登录",-1),S=b("确认");var U=r({expose:[],setup(r){l();const b=t(),U=i(),{dropdownElement:W,isOpen:q,toggle:F}=o(),G=d((()=>U.state.channel.user)),H=d((()=>U.state.channel.role)),I=d((()=>U.state.channel.logined)),J=u(!1),K=()=>{console.log("role",H),U.dispatch("channel/logout",G.value.token).then((()=>{b.push({name:"login"})}))};return c((()=>{U.dispatch("channel/getProfile").then((()=>{I.value||b.push({name:"login"})}))})),(l,t)=>{const i=s,o=p("RouterLink"),r=e,d=a,u=n;return m(),v("li",k,[g("div",{id:"profile-menu",ref:W,class:[[_(q)&&"is-active"],"dropdown profile-dropdown dropdown-trigger is-spaced is-up"]},[_(G).ex_logined?(m(),v(i,{key:0,onClick:_(F),initials:(_(G).real_name||_(G).real_name).substr(0,1)},null,8,["onClick","initials"])):f("",!0),y,_(G).ex_logined?(m(),v("div",j,[g("div",x,[g("div",C,[g("div",V,[g(i,{initials:(_(G).real_name||_(G).real_name).substr(0,1),size:"large"},null,8,["initials"])]),g("div",A,[g("span",null,h(_(G).real_name||_(G).real_name),1),g("span",null,h(_(G).title||_(G).alias),1)])]),g(o,{to:{name:1===_(G).login_attr?"user-settings-profile":"admin-settings-profile"},class:"dropdown-item is-media"},{default:w((()=>[E,P])),_:1},8,["to"]),z,g(o,{to:{name:1===_(G).login_attr?"user-settings-password":"admin-settings-password"},class:"dropdown-item is-media"},{default:w((()=>[B,D])),_:1},8,["to"]),L,g("div",M,[g("button",{class:"button v-button is-primary is-raised is-fullwidth logout-button",onClick:t[1]||(t[1]=s=>{J.value=!0})},[O,R])])])])):f("",!0)],2),g(u,{open:J.value,actions:"center",onClose:t[2]||(t[2]=s=>J.value=!1),title:"提示信息"},{content:w((()=>[g(r,{title:"您确认要退出登录吗？"})])),action:w((()=>[g(d,{color:"primary",onClick:K,raised:""},{default:w((()=>[S])),_:1})])),_:1},8,["open"])])}}});export{U as _};
